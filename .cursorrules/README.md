# ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë§ˆì´ê·¸ë ˆì´ì…˜ ë¬¸ì„œ

## ê¸°ì¡´ ì‹œìŠ¤í…œ ë¶„ì„
- ê¸°ì¡´ ì‹œìŠ¤í…œì€ ë ˆê±°ì‹œ ëŒ€ì‹œë³´ë“œ í˜•íƒœë¡œ ìµœê·¼ ë“±ë¡, ìµœê·¼ë™ë¡(ê¸°ê´€), ê²€ì‚¬ì™„ë£Œ(ê°œì¸), ê²€ì‚¬ì™„ë£Œ(íŒ€ë³„) ë“±ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ í‘œì‹œ
- ì¢Œì¸¡ ë„¤ë¹„ê²Œì´ì…˜ì—ëŠ” Dashboard, ê¸°ì—…ì •ë³´, ë§¤ë‹ˆì €ê´€ë¦¬, ê³„ì •ëª©ë¡, ë¬¸ì˜ê¸€ ê´€ë¦¬, ê²€ì‚¬ê²°ê³¼ ë“±ì˜ ë©”ë‰´ êµ¬ì„±
- ì‹œê°„ ìˆœì„œëŒ€ë¡œ ì •ë ¬ëœ ë°ì´í„° í‘œì‹œ ë°©ì‹

## ë§ˆì´ê·¸ë ˆì´ì…˜ ìš”êµ¬ì‚¬í•­
1. ë°ì´í„° êµ¬ì¡° ìœ ì§€
   - ì‚¬ìš©ì ì •ë³´: ì´ë¦„/ID(kimmingi09), íƒ€ì„ìŠ¤íƒ¬í”„(2025-04-12 03:19:37) í˜•ì‹ ìœ ì§€
   - ê¸°ê´€ ì •ë³´: ê¸°ê´€ëª…(ì¥ì² ë„ëŒ€í•™êµ êµìˆ˜), ID(gwsu20250411) í˜•ì‹ ìœ ì§€

2. UI/UX í˜„ëŒ€í™”
   - ë°˜ì‘í˜• ë””ìì¸ ì ìš©
   - í…Œì´ë¸” í˜•ì‹ì—ì„œ ì¹´ë“œ í˜•íƒœì˜ ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒìœ¼ë¡œ ë³€ê²½
   - ë‹¤í¬ ëª¨ë“œ ì§€ì›
   - í•„í„°ë§ ë° ê²€ìƒ‰ ê¸°ëŠ¥ ê°•í™”

3. ê¸°ëŠ¥ ê°œì„ 
   - ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ ì¶”ê°€
   - ë°ì´í„° ì‹œê°í™” ì°¨íŠ¸ ì¶”ê°€
   - í˜ì´ì§€ë„¤ì´ì…˜ ê°œì„ 
   - ê° í•­ëª©ë³„ ìƒì„¸ ì •ë³´ í™•ì¸ ê¸°ëŠ¥ ì¶”ê°€

4. ê¶Œí•œ ê´€ë¦¬
   - ê´€ë¦¬ì/ë§¤ë‹ˆì €/ê¸°ì—… ê´€ë¦¬ì ë“± ì—­í•  ê¸°ë°˜ ê¶Œí•œ ì²´ê³„ êµ¬í˜„
   - ê° ì—­í• ë³„ ì ‘ê·¼ ê°€ëŠ¥í•œ ë©”ë‰´ ë° ê¸°ëŠ¥ ì œí•œ

## ë§ˆì´ê·¸ë ˆì´ì…˜ ì§„í–‰ ìƒí™©

### 1. ê¸°ìˆ  ìŠ¤íƒ ì—…ë°ì´íŠ¸
- [x] Next.js 15.3.0 í”„ë¡œì íŠ¸ ìƒì„±
- [x] TypeScript í†µí•©
- [x] Tailwind CSS ì„¤ì •
- [x] ê´€ë ¨ íŒ¨í‚¤ì§€ ì„¤ì¹˜ (React Hook Form, Zod, Headless UI, Chart.js, NextAuth.js, PostgreSQL)

### 2. ì¸ì¦ ì‹œìŠ¤í…œ êµ¬í˜„
- [x] NextAuth.js í†µí•©
- [x] PostgreSQL ì—°ê²° ì„¤ì •
- [x] ì¸ì¦ ì˜¤ë¥˜ ì²˜ë¦¬ ê°œì„ 
- [x] ê¶Œí•œ ê¸°ë°˜ ì¸ì¦ êµ¬í˜„
- [x] ë¡œê·¸ì¸ ê¸°ë¡ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥

### 3. ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
- [x] ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ êµ¬í˜„
- [x] ë¡œê·¸ì¸ í˜ì´ì§€ êµ¬í˜„
- [x] ëŒ€ì‹œë³´ë“œ ë©”ì¸ í˜ì´ì§€ êµ¬í˜„
- [x] ë„¤ë¹„ê²Œì´ì…˜ ë°” êµ¬í˜„
- [ ] ë‹¤í¬ ëª¨ë“œ êµ¬í˜„ (ì§„í–‰ ì¤‘)

### 4. ë°ì´í„° ê´€ë¦¬
- [x] ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì„¤ì •
- [x] ì‚¬ìš©ì ê¶Œí•œ ê´€ë¦¬ êµ¬í˜„
- [ ] ê¸°ê´€ ê´€ë¦¬ í˜ì´ì§€ êµ¬í˜„ (ì§„í–‰ ì¤‘)
- [ ] ê³„ì • ëª©ë¡ í˜ì´ì§€ êµ¬í˜„ (ì§„í–‰ ì¤‘)
- [ ] ë¬¸ì˜ê¸€ ê´€ë¦¬ í˜ì´ì§€ êµ¬í˜„ (ê³„íšë¨)

### 5. ë°ì´í„° ì‹œê°í™”
- [x] Chart.js í†µí•©
- [x] ê¸°ë³¸ ì°¨íŠ¸ êµ¬í˜„
- [ ] ì‹¤ì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸ êµ¬í˜„ (ì§„í–‰ ì¤‘)
- [ ] ê³ ê¸‰ í•„í„°ë§ ê¸°ëŠ¥ êµ¬í˜„ (ê³„íšë¨)

## ë‹¤ìŒ ë‹¨ê³„
1. ê¸°ê´€ ê´€ë¦¬ í˜ì´ì§€ ì™„ì„±
2. ê²€ì‚¬ ê²°ê³¼ í˜ì´ì§€ êµ¬í˜„
3. ë‹¤í¬ ëª¨ë“œ ì™„ì„±
4. ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ê¸°ëŠ¥ ì¶”ê°€
5. ê³ ê¸‰ í•„í„°ë§ ë° ê²€ìƒ‰ ê¸°ëŠ¥ êµ¬í˜„
6. ëª¨ë°”ì¼ ìµœì í™” ë° í…ŒìŠ¤íŠ¸

## ì£¼ì˜ì‚¬í•­
- PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹œ ì˜¬ë°”ë¥¸ í˜¸ìŠ¤íŠ¸, í¬íŠ¸, ì‚¬ìš©ì ì´ë¦„ ë° ë¹„ë°€ë²ˆí˜¸ ì„¤ì • í•„ìš”
- í™˜ê²½ ë³€ìˆ˜(.env.local)ë¥¼ í†µí•œ ë¯¼ê°í•œ ì •ë³´ ê´€ë¦¬
- ê´€ë¦¬ì ê³„ì • ìƒì„± ì‹œ ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ì„¤ì • ê¶Œì¥
- ë°ì´í„°ë² ì´ìŠ¤ì— CRYPT í•¨ìˆ˜ ì‚¬ìš©í•˜ì—¬ ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” ì ìš©ë¨

# Cursor AI ìµœì í™” ë£° íŒŒì¼ (Next.js 15.3.0)

## í”„ë¡œì íŠ¸ ìœ„ì¹˜
E:\work_test\manager


## ê°œë°œ í™˜ê²½ ì„¤ì •
- Node.js 18.17.0 ì´ìƒ í•„ìˆ˜ (Next.js 15.3.0 ìš”êµ¬ì‚¬í•­)
- TypeScript 5.1.6 ì´ìƒ ì‚¬ìš©
- ESLint + Prettier í†µí•© ì„¤ì •
  ```
  # .eslintrc.json
  {
    "extends": [
      "next/core-web-vitals",
      "prettier"
    ],
    "rules": {
      "react/no-unescaped-entities": "off"
    }
  }
  ```
- husky + lint-staged ì„¤ì •ìœ¼ë¡œ ì»¤ë°‹ ì „ ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬ ìë™í™”

## Next.js 15.3.0 ìµœì í™” í™œìš©

### ì£¼ìš” ê¸°ëŠ¥ í™œìš©
- Server Actions ì ê·¹ í™œìš©
- Turbopackìœ¼ë¡œ ê°œë°œ ì„œë²„ ì„±ëŠ¥ í–¥ìƒ (`--turbo` í”Œë˜ê·¸ ì‚¬ìš©)
- Partial Prerendering (PPR) í™œìš©
- ìƒˆë¡œìš´ `use-router`, `use-search-params`, `use-scroll-position` í›… í™œìš©
- Server-only ì»´í¬ë„ŒíŠ¸ ìµœëŒ€í•œ í™œìš©

### App Router ìµœì í™” í™œìš©
```typescript
// app/page.tsx
export default function HomePage() {
  return (
    <main>
      <h1>Welcome</h1>
      <ClientComponent />
    </main>
  );
}

// (ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë°ì´í„° ë¶ˆëŸ¬ì˜¤ëŠ” ë¡œì§ ë°°ì¹˜)
async function getData() {
  const res = await fetch('https://api.example.com/data');
  if (!res.ok) throw new Error('Failed to fetch data');
  return res.json();
}

// app/products/[id]/page.tsx (ë™ì  ë¼ìš°íŠ¸)
export default async function ProductPage({ params }: { params: { id: string } }) {
  const product = await getProduct(params.id);
  return <ProductDetails product={product} />;
}
```

### Server Actions í™œìš©
```typescript
// app/actions.ts
'use server'

import { revalidatePath } from 'next/cache';
import { z } from 'zod';

const schema = z.object({
  name: z.string().min(2),
  email: z.string().email(),
});

export async function createUser(formData: FormData) {
  const validatedFields = schema.safeParse({
    name: formData.get('name'),
    email: formData.get('email'),
  });
  
  if (!validatedFields.success) {
    return { error: 'Invalid fields' };
  }
  
  // DB ì €ì¥ ë¡œì§
  
  revalidatePath('/users');
  return { success: true };
}
```

### Partial Prerendering (PPR)
```typescript
// app/layout.tsx
export const runtime = 'experimental-edge';
export const preferredRegion = 'auto';

export default function RootLayout({ children }) {
  return (
    <html lang="ko">
      <body>{children}</body>
    </html>
  );
}
```

## ì½”ë“œ êµ¬ì¡° ë° ì•„í‚¤í…ì²˜

### ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
src/
â”œâ”€â”€ app/                # Next.js App Router í˜ì´ì§€
â”‚   â”œâ”€â”€ (auth)/         # ì¸ì¦ ê´€ë ¨ ë¼ìš°íŠ¸ ê·¸ë£¹
â”‚   â”œâ”€â”€ (dashboard)/    # ëŒ€ì‹œë³´ë“œ ë¼ìš°íŠ¸ ê·¸ë£¹
â”‚   â”œâ”€â”€ api/            # API ë¼ìš°íŠ¸
â”‚   â””â”€â”€ layout.tsx      # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”œâ”€â”€ components/         # ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ui/             # ê³µí†µ UI ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ layout/         # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ [feature]/      # ê¸°ëŠ¥ë³„ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ lib/                # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚   â”œâ”€â”€ actions/        # ì„œë²„ ì•¡ì…˜ ëª¨ìŒ
â”‚   â”œâ”€â”€ db/             # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°/ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ utils.ts        # ë²”ìš© ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”œâ”€â”€ hooks/              # í´ë¼ì´ì–¸íŠ¸ í›…
â”œâ”€â”€ schemas/            # Zod ìŠ¤í‚¤ë§ˆ ì •ì˜
â”œâ”€â”€ types/              # TypeScript íƒ€ì… ì •ì˜
â””â”€â”€ styles/             # ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼
```

### ì»´í¬ë„ŒíŠ¸ êµ¬ë¶„
- ì„œë²„ ì»´í¬ë„ŒíŠ¸: ë³µì¡í•œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°, DB ì ‘ê·¼, ë Œë”ë§ ìµœì í™”
- í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸: ì¸í„°ë™ì…˜, ì´ë²¤íŠ¸ í•¸ë“¤ë§, useState/useEffect
- ê³µìœ  ì»´í¬ë„ŒíŠ¸: ê° ê¸°ëŠ¥ë³„ë¡œ ëª¨ì•„ì„œ êµ¬ì„±

## ê°œë°œ í‘œì¤€ ë° íŒ¨í„´

### TypeScript ê·œì¹™
- `any` íƒ€ì… ì‚¬ìš© ê¸ˆì§€
- ì„¸ë¶€ì ì¸ íƒ€ì… ì •ì˜ë¡œ ìë™ì™„ì„±/íƒ€ì… ì•ˆì „ì„± ê·¹ëŒ€í™”
- ì„œë²„ ì»´í¬ë„ŒíŠ¸ì™€ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ props íƒ€ì… ë¶„ë¦¬

```typescript
// types/product.ts
export type Product = {
  id: string;
  name: string;
  price: number;
  description?: string;
  images: string[];
};

// ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” íƒ€ì…
export type ProductWithInventory = Product & {
  inventory: {
    count: number;
    warehouses: string[];
  }
};

// props íƒ€ì… ì •ì˜
export type ProductCardProps = {
  product: Product;
  variant?: 'default' | 'compact';
};
```

### ì»´í¬ë„ŒíŠ¸ íŒ¨í„´
```typescript
// components/ui/button.tsx
'use client'

import { forwardRef } from 'react';
import { cn } from '@/lib/utils';

export type ButtonProps = React.ButtonHTMLAttributes<HTMLButtonElement> & {
  variant?: 'default' | 'destructive' | 'outline' | 'ghost';
  size?: 'sm' | 'md' | 'lg';
  isLoading?: boolean;
};

const Button = forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant = 'default', size = 'md', isLoading, children, ...props }, ref) => {
    return (
      <button
        ref={ref}
        className={cn(
          // ê¸°ë³¸ ìŠ¤íƒ€ì¼
          'inline-flex items-center justify-center rounded-md font-medium transition focus:outline-none focus:ring-2',
          // ì‚¬ì´ì¦ˆë³„ ìŠ¤íƒ€ì¼
          size === 'sm' ? 'px-3 py-1.5 text-sm' : 
          size === 'lg' ? 'px-5 py-3 text-lg' : 'px-4 py-2 text-base',
          // ë³€í˜•ë³„ ìŠ¤íƒ€ì¼
          variant === 'default' ? 'bg-primary text-primary-foreground hover:bg-primary/90' :
          variant === 'destructive' ? 'bg-destructive text-destructive-foreground hover:bg-destructive/90' :
          variant === 'outline' ? 'border border-input bg-background hover:bg-accent hover:text-accent-foreground' :
          'bg-ghost hover:bg-accent hover:text-accent-foreground',
          // ë¡œë”© ìƒíƒœ
          isLoading && 'cursor-wait opacity-70',
          className
        )}
        disabled={isLoading || props.disabled}
        {...props}
      >
        {isLoading ? (
          <span className="mr-2">
            <LoadingSpinner className="h-4 w-4" />
          </span>
        ) : null}
        {children}
      </button>
    );
  }
);
Button.displayName = 'Button';

export { Button };
```

## ìƒíƒœ ê´€ë¦¬ ë° ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

### ì„œë²„ ìƒíƒœ ê´€ë¦¬
- ìµœëŒ€í•œ ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë°ì´í„° ë¡œë”©
- React Server Components í™œìš©í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ ë²ˆë“¤ í¬ê¸° ìµœì†Œí™”
- React Query(TanStack Query) ì‚¬ìš© (í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•œ ê²½ìš°)

```typescript
// app/products/page.tsx
export default async function ProductsPage({
  searchParams
}: {
  searchParams: { q?: string; category?: string }
}) {
  // í´ë¼ì´ì–¸íŠ¸ê°€ ì•„ë‹Œ ì„œë²„ì—ì„œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
  const products = await getProducts({
    query: searchParams.q,
    category: searchParams.category
  });
  
  return (
    <main>
      <h1>Products</h1>
      <ProductFilter />
      <ProductList products={products} />
    </main>
  );
}
```

### í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ ê´€ë¦¬
- ë¡œì»¬ UI ìƒíƒœ: `useState`, `useReducer`
- í¼ ìƒíƒœ: React Hook Form + Zod
- ì „ì—­ ìƒíƒœ: Zustand ë˜ëŠ” Context API
- ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìµœì†Œí™” (ì„œë²„ ì»´í¬ë„ŒíŠ¸ í™œìš©ìœ¼ë¡œ ëŒ€ì²´)

### ë°ì´í„° ìºì‹± ë° ì¬ê²€ì¦
```typescript
// app/dashboard/page.tsx
export const revalidate = 60; // 60ì´ˆë§ˆë‹¤ ì¬ê²€ì¦

// lib/actions/products.ts
'use server'

import { revalidatePath, revalidateTag } from 'next/cache';

export async function createProduct(data) {
  // DB ì €ì¥ ë¡œì§
  
  // íŠ¹ì • ê²½ë¡œ ì¬ê²€ì¦
  revalidatePath('/products');
  
  // íƒœê·¸ ê¸°ë°˜ ì¬ê²€ì¦
  revalidateTag('products');
}
```

## í¼ ì²˜ë¦¬ ë° ìœ íš¨ì„± ê²€ì‚¬

### Server Actionsê³¼ React Hook Form í†µí•©
```typescript
// components/forms/product-form.tsx
'use client'

import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { createProduct } from '@/lib/actions/products';
import { productSchema, type ProductFormValues } from '@/schemas/product';
import { useFormState } from 'react-dom';

export function ProductForm() {
  const [state, formAction] = useFormState(createProduct, { message: '' });
  
  const form = useForm<ProductFormValues>({
    resolver: zodResolver(productSchema),
    defaultValues: {
      name: '',
      price: 0,
      description: '',
    },
  });
  
  return (
    <form action={formAction}>
      <div>
        <label htmlFor="name">Name</label>
        <input id="name" name="name" required />
      </div>
      
      <div>
        <label htmlFor="price">Price</label>
        <input id="price" name="price" type="number" step="0.01" required />
      </div>
      
      <div>
        <label htmlFor="description">Description</label>
        <textarea id="description" name="description" />
      </div>
      
      {state.message && <p className="text-red-500">{state.message}</p>}
      
      <button type="submit">Create Product</button>
    </form>
  );
}
```

### ìŠ¤í‚¤ë§ˆ ì •ì˜
```typescript
// schemas/product.ts
import { z } from 'zod';

export const productSchema = z.object({
  name: z.string().min(2, 'ì œí’ˆëª…ì€ 2ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤'),
  price: z.number().min(0, 'ê°€ê²©ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤'),
  description: z.string().optional(),
  categoryId: z.string().optional(),
});

export type ProductFormValues = z.infer<typeof productSchema>;
```

## ìŠ¤íƒ€ì¼ë§

### Tailwind CSS ìµœì í™”
- Tailwind v3.4 ì´ìƒ ì‚¬ìš© ê¶Œì¥
- JIT ëª¨ë“œë¡œ ìµœì í™”ëœ CSS ë²ˆë“¤ ìƒì„±
- ì—¬ëŸ¬ ë³€í˜•ì´ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ëŠ” `cva` íŒ¨í„´ ì‚¬ìš©

```typescript
// lib/utils.ts
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

### ë‹¤í¬ ëª¨ë“œ ì§€ì›
```typescript
// app/layout.tsx
export default function RootLayout({ children }) {
  return (
    <html lang="ko" suppressHydrationWarning>
      <body className="min-h-screen bg-background text-foreground antialiased">
        <ThemeProvider attribute="class" defaultTheme="system" enableSystem>
          {children}
        </ThemeProvider>
      </body>
    </html>
  );
}

// components/theme-toggle.tsx
'use client'

import { useTheme } from 'next-themes';

export function ThemeToggle() {
  const { theme, setTheme } = useTheme();
  
  return (
    <button onClick={() => setTheme(theme === 'dark' ? 'light' : 'dark')}>
      {theme === 'dark' ? 'ğŸŒ' : 'ğŸŒ™'}
    </button>
  );
}
```

## API ë° ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°

### API í†µí•©
- ì„œë²„ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ì§ì ‘ fetch ì‚¬ìš©
- í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” React Query ì‚¬ìš©
- TypeScriptì™€ Zodë¥¼ ì‚¬ìš©í•œ íƒ€ì… ì•ˆì „í•œ API í˜¸ì¶œ

```typescript
// lib/db/index.ts
import { PrismaClient } from '@prisma/client';

const globalForPrisma = global as unknown as { prisma: PrismaClient };

export const prisma = globalForPrisma.prisma || new PrismaClient();

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;

// app/api/products/route.ts
import { prisma } from '@/lib/db';
import { NextResponse } from 'next/server';
import { productSchema } from '@/schemas/product';

export async function GET(request: Request) {
  const products = await prisma.product.findMany();
  return NextResponse.json(products);
}

export async function POST(request: Request) {
  const body = await request.json();
  
  try {
    const validatedData = productSchema.parse(body);
    const product = await prisma.product.create({
      data: validatedData
    });
    
    return NextResponse.json(product, { status: 201 });
  } catch (error) {
    return NextResponse.json({ error: 'Invalid request' }, { status: 400 });
  }
}
```

## ì„±ëŠ¥ ìµœì í™”

### ì´ë¯¸ì§€ ìµœì í™”
```typescript
// components/ui/optimized-image.tsx
import Image from 'next/image';
import { cn } from '@/lib/utils';

type OptimizedImageProps = {
  src: string;
  alt: string;
  width?: number;
  height?: number;
  className?: string;
  priority?: boolean;
};

export function OptimizedImage({
  src,
  alt,
  width,
  height,
  className,
  priority = false,
  ...props
}: OptimizedImageProps) {
  return (
    <div className={cn('overflow-hidden', className)}>
      <Image
        src={src}
        alt={alt}
        width={width || 800}
        height={height || 600}
        className="object-cover"
        priority={priority}
        sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
        {...props}
      />
    </div>
  );
}
```

### ë¡œë”© ìµœì í™”
- Next.js 15ì˜ Streaming SSR í™œìš©
- `loading.tsx` íŒŒì¼ë¡œ ë¡œë”© ìƒíƒœ í‘œì‹œ
- ë¶€ë¶„ì ì¸ ìŠ¤ì¼ˆë ˆí†¤ UI êµ¬í˜„

```typescript
// app/products/loading.tsx
export default function Loading() {
  return (
    <div className="space-y-4">
      <div className="h-8 w-64 animate-pulse rounded bg-gray-200 dark:bg-gray-700"></div>
      <div className="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {Array.from({ length: 6 }).map((_, i) => (
          <div key={i} className="rounded-lg border p-4">
            <div className="h-40 animate-pulse rounded bg-gray-200 dark:bg-gray-700"></div>
            <div className="mt-4 h-6 w-3/4 animate-pulse rounded bg-gray-200 dark:bg-gray-700"></div>
            <div className="mt-2 h-4 w-1/2 animate-pulse rounded bg-gray-200 dark:bg-gray-700"></div>
          </div>
        ))}
      </div>
    </div>
  );
}
```

### ë²ˆë“¤ ìµœì í™”
- ë‹¤ì´ë‚˜ë¯¹ ì„í¬íŠ¸ í™œìš©
- ì¤‘ìš”í•˜ì§€ ì•Šì€ ì»´í¬ë„ŒíŠ¸ ì§€ì—° ë¡œë”©

```typescript
// app/page.tsx
import dynamic from 'next/dynamic';

// ì§€ì—° ë¡œë”© ì»´í¬ë„ŒíŠ¸
const HeavyChart = dynamic(() => import('@/components/charts/heavy-chart'), {
  loading: () => <div>Loading chart...</div>,
  ssr: false // í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œë§Œ ë Œë”ë§
});

export default function Home() {
  return (
    <main>
      <h1>Dashboard</h1>
      <HeavyChart />
    </main>
  );
}
```

## í…ŒìŠ¤íŠ¸ ë° í’ˆì§ˆ ê´€ë¦¬

### í…ŒìŠ¤íŠ¸ ì„¤ì •
- Jest + React Testing Library
- ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- ì„œë²„ ì•¡ì…˜ í…ŒìŠ¤íŠ¸
- Playwrightë¡œ E2E í…ŒìŠ¤íŠ¸

```typescript
// components/ui/button.test.tsx
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { Button } from './button';

describe('Button', () => {
  it('renders with default styles', () => {
    render(<Button>Click me</Button>);
    const button = screen.getByRole('button', { name: /click me/i });
    expect(button).toBeInTheDocument();
    expect(button).toHaveClass('bg-primary');
  });

  it('handles click events', async () => {
    const handleClick = jest.fn();
    render(<Button onClick={handleClick}>Click me</Button>);
    
    await userEvent.click(screen.getByRole('button'));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });
});
```

### ì ‘ê·¼ì„±
- ESLint ì ‘ê·¼ì„± ê·œì¹™ ì„¤ì •
- ì»´í¬ë„ŒíŠ¸ì— ì ì ˆí•œ ARIA ì†ì„± ì¶”ê°€
- Headless UI í™œìš©í•˜ì—¬ ì ‘ê·¼ì„± ìë™ ê´€ë¦¬

## ë°°í¬ ë° ìš´ì˜

### ë°°í¬ ìµœì í™”
- Vercel ë˜ëŠ” Cloudflare Pagesì— ë°°í¬
- ì •ì  ìƒì„±ê³¼ ì„œë²„ ë Œë”ë§ì˜ ì ì ˆí•œ ì¡°í•©
- êµ­ì œí™”(i18n) ì§€ì›

```typescript
// middleware.ts
import { NextResponse } from 'next/server';
import type { NextRequest } from 'next/server';

export function middleware(request: NextRequest) {
  // ê²½ë¡œì—ì„œ ë¡œì¼€ì¼ ì •ë³´ ì¶”ì¶œ
  const locale = request.nextUrl.locale || 'ko';
  
  // ë¡œì¼€ì¼ì— ë”°ë¥¸ ì²˜ë¦¬
  // ...
  
  return NextResponse.next();
}

export const config = {
  matcher: ['/((?!api|_next/static|_next/image|favicon.ico).*)'],
};
```

### ëª¨ë‹ˆí„°ë§ ë° ë¶„ì„
- Vercel Analytics ì„¤ì •
- Next.js 15ì˜ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ í™œìš©
- Sentryë¥¼ í†µí•œ ì—ëŸ¬ ëª¨ë‹ˆí„°ë§

## í˜‘ì—… ë° ê°œë°œ íš¨ìœ¨ì„±

### ì»´í¬ë„ŒíŠ¸ ë¬¸ì„œí™”
- Storybook ì„¤ì •
- MDX íŒŒì¼ë¡œ ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©ë²• ë¬¸ì„œí™”

### Git ì»¨ë²¤ì…˜
```
# ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹
feat: ìƒí’ˆ ê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€
fix: ì¥ë°”êµ¬ë‹ˆ ì•„ì´í…œ ì‚­ì œ ì˜¤ë¥˜ ìˆ˜ì •
chore: íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸
docs: README ì—…ë°ì´íŠ¸
```

### ì½”ë“œ ë¦¬ë·° í”„ë¡œì„¸ìŠ¤
- PR í…œí”Œë¦¿ ì‚¬ìš©
- ìë™í™”ëœ CI ê²€ì‚¬
- ì½”ë“œ ì†Œìœ ì ì§€ì •

## í™•ì¥ì„± ë° ë³´ì•ˆ

### í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜
- ë§ˆì´í¬ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ê³ ë ¤
- ëª¨ë“ˆì‹ ê¸°ëŠ¥ êµ¬ì¡°
- ìµœì†Œí•œì˜ ì˜ì¡´ì„±

### ë³´ì•ˆ ê°•í™”
- Next.jsì˜ í—¤ë” ìµœì í™”
- CSP(Content Security Policy) ì„¤ì •
- CSRF ë³´í˜¸